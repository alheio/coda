PROJECT(coda)
CMAKE_MINIMUM_REQUIRED(VERSION 2.6)
SET (CMAKE_MODULE_PATH ${PROJECT_SOURCE_DIR}/CMakeModules ${CMAKE_MODULE_PATH})

INCLUDE (Compile)
INCLUDE (Package)

USE_PACKAGE (EXPAT expat expat.h)

ADD_LIBRARY(coda STATIC coda/txml.cpp)
TARGET_LINK_LIBRARIES(coda ${LIB_EXPAT})
SET_TARGET_PROPERTIES(coda PROPERTIES VERSION 0.1 SOVERSION 1)

INSTALL(FILES coda/txml.hpp DESTINATION include/coda)
INSTALL(TARGETS coda DESTINATION ${LIBDIR})

ENABLE_TESTING()
ADD_EXECUTABLE(test_txml tests/txml/test_txml.cpp)
TARGET_LINK_LIBRARIES(test_txml coda)
ADD_TEST(test_txml test_txml)

